# 🚀 أوامر التحديث من GitHub على السيرفر

## 📋 **الأوامر الأساسية:**

### **1️⃣ الاتصال بالسيرفر:**
```bash
ssh asem@102.213.180.235
```
**الوظيفة**: الاتصال بالسيرفر باستخدام SSH

---

### **2️⃣ الانتقال لمجلد التطبيق:**
```bash
cd ~/kitchen_factory
```
**الوظيفة**: الانتقال إلى مجلد التطبيق الرئيسي

---

### **3️⃣ فحص الحالة الحالية:**
```bash
git status
git log -1 --oneline
```
**الوظيفة**: 
- `git status`: فحص حالة Git والتعديلات المحلية
- `git log -1 --oneline`: عرض آخر commit

---

### **4️⃣ تنزيل التحديثات:**
```bash
git fetch origin
git pull origin main
```
**الوظيفة**:
- `git fetch origin`: جلب التحديثات من GitHub بدون دمج
- `git pull origin main`: دمج التحديثات مع الكود المحلي

---

### **5️⃣ التحقق من التحديثات:**
```bash
git log -1 --oneline
```
**الوظيفة**: التأكد من وصول آخر التحديثات

---

### **6️⃣ إيقاف التطبيق:**
```bash
pkill -f "python.*app.py"
```
**الوظيفة**: إيقاف جميع عمليات Python المتعلقة بالتطبيق

---

### **7️⃣ إعادة تشغيل التطبيق:**
```bash
source venv/bin/activate
nohup python app.py > app.log 2>&1 &
```
**الوظيفة**:
- `source venv/bin/activate`: تفعيل البيئة الافتراضية
- `nohup python app.py > app.log 2>&1 &`: تشغيل التطبيق في الخلفية مع حفظ اللوج

---

### **8️⃣ التحقق من التشغيل:**
```bash
ps aux | grep "python.*app.py"
tail -f app.log
```
**الوظيفة**:
- `ps aux | grep "python.*app.py"`: التحقق من تشغيل التطبيق
- `tail -f app.log`: مراقبة اللوج المباشر

---

## 📊 **جدول وظائف الأوامر:**

| الأمر | الوظيفة | متى يُستخدم |
|-------|---------|-------------|
| `ssh asem@102.213.180.235` | الاتصال بالسيرفر | بداية كل جلسة |
| `cd ~/kitchen_factory` | الانتقال لمجلد التطبيق | بعد الاتصال |
| `git status` | فحص حالة Git | قبل التحديث |
| `git fetch origin` | جلب التحديثات | عند التحديث |
| `git pull origin main` | دمج التحديثات | عند التحديث |
| `pkill -f "python.*app.py"` | إيقاف التطبيق | قبل إعادة التشغيل |
| `source venv/bin/activate` | تفعيل البيئة | قبل التشغيل |
| `nohup python app.py > app.log 2>&1 &` | تشغيل التطبيق | بعد التحديث |
| `ps aux | grep "python.*app.py"` | التحقق من التشغيل | بعد التشغيل |
| `tail -f app.log` | مراقبة اللوج | للتحقق من الأخطاء |

---

## 🔧 **أوامر إضافية مفيدة:**

### **فحص التحديثات المتاحة:**
```bash
git fetch origin
git log HEAD..origin/main --oneline
```
**الوظيفة**: عرض التحديثات الجديدة قبل دمجها

### **الرجوع للإصدار السابق:**
```bash
git log --oneline -5
git reset --hard HEAD~1
```
**الوظيفة**: الرجوع لـ commit سابق (حذر!)

### **فحص حالة التطبيق:**
```bash
curl http://102.213.180.235:4012
```
**الوظيفة**: اختبار التطبيق من المتصفح

### **مراقبة اللوج:**
```bash
tail -50 app.log
grep -i "error" app.log
```
**الوظيفة**: فحص آخر 50 سطر أو البحث عن أخطاء

---

## ⚠️ **نصائح مهمة:**

1. **احتفظ بنسخة احتياطية** قبل التحديث
2. **اختبر التطبيق** بعد كل تحديث
3. **راقب اللوج** للتأكد من عدم وجود أخطاء
4. **تأكد من إيقاف التطبيق** قبل التحديث
5. **فعّل البيئة الافتراضية** قبل التشغيل

---

## 🆘 **استكشاف الأخطاء:**

### **إذا فشل التحديث:**
```bash
git status
git stash
git pull origin main
```

### **إذا لم يعمل التطبيق:**
```bash
tail -100 app.log
python app.py  # تشغيل مباشر لرؤية الأخطاء
```

### **إذا لم توجد التحديثات:**
```bash
git fetch origin
git log --oneline -10
```

---

## 📞 **للدعم:**

إذا واجهت أي مشكلة:
1. تحقق من اللوج: `tail -f app.log`
2. اختبر التطبيق: `curl http://102.213.180.235:4012`
3. أرسل رسائل الخطأ للدعم

---

✅ **آخر تحديث:** 2025-10-19  
🎯 **الهدف:** تسهيل عملية التحديث من GitHub على السيرفر
