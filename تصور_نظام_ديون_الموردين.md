# ุชุตูุฑ ูุธุงู ุฏููู ุงูููุฑุฏูู - ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ ุจูุธุงู ุฏูุน ูุฑู

## ๐ฏ **ุงููุถุน ุงูุญุงูู ูุงููุฑุตุฉ ุงูุฐูุจูุฉ**

### **ุงููุถุน ุงููุซุงูู ูุฅุนุงุฏุฉ ุงูุจูุงุก:**
- โ **ูุง ุชูุฌุฏ ุจูุงูุงุช ุฅูุชุงุฌ** - ูุฎุงุทุฑ ููุฎูุถุฉ ุฌุฏุงู
- โ **ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุชููุฑุฉ** - ุฃูุงู ุฅุถุงูู
- โ **ุงูุชุทุจูู ูู ูุฑุญูุฉ ุงูุชุทููุฑ** - ูุฑููุฉ ูุงููุฉ
- โ **ูุง ููุฌุฏ ูุณุชุฎุฏููู ููุงุฆููู** - ูุง ุชููู ููุฎุฏูุฉ

### **ุงููุดููุฉ ูู ุงููุธุงู ุงูุญุงูู:**
- ุงูุณุฏุงุฏ ูุฑุชุจุท ุจูุงุชูุฑุฉ ูุญุฏุฏุฉ (ุบูุฑ ุนููู)
- ุตุนูุจุฉ ูู ุชุชุจุน ุงูุฏููู ุงูุฅุฌูุงููุฉ
- ุชุนููุฏ ูู ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช ุงูุฌุฒุฆูุฉ
- ูุธุงู ูุฏูู ูุนูุฏ ูุบูุฑ ูุฑู

### **ุงููุฑุตุฉ ุงูุฐูุจูุฉ:**
- **ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ** ุจุฏูู ูุฎุงุทุฑ ููุฏุงู ุงูุจูุงูุงุช
- **ูุธุงู ูุธูู 100%** ุจุฏูู ุชุนููุฏุงุช ุงููุธุงู ุงููุฏูู
- **ูุฑููุฉ ูุงููุฉ** ูู ุงูุชุตููู ูุงูุชุทููุฑ

---

## ๐ก **ุงูุญู ุงูููุชุฑุญ: ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ ุจูุธุงู ุฏูุน ูุฑู**

### **๐ฏ ููุณูุฉ ุงููุธุงู ุงูุฌุฏูุฏ:**
- **ุฏูุน ูุฑู**: ูุง ุญุงุฌุฉ ูุฑุจุท ุงูุฏูุน ุจูุงุชูุฑุฉ ูุญุฏุฏุฉ
- **ุชูุฒูุน ุชููุงุฆู**: ุงููุธุงู ููุฒุน ุงููุฏููุนุงุช ุจุฐูุงุก
- **ูุถูุญ ูุงูู**: ุฑุคูุฉ ุดุงููุฉ ููุฏููู ูุงููุฏููุนุงุช
- **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุงุฌูุฉ ุจุณูุทุฉ ููููููุฉ

### **1. ุฌุฏูู "ุงูููุฑุฏูู" ุงูุฌุฏูุฏ (Supplier)**

```python
class Supplier(db.Model):
    """ูููุฐุฌ ุงูููุฑุฏ ุงูุฌุฏูุฏ - ูุน ุฏุนู ุงูุฏูุน ุงููุฑู"""
    __tablename__ = 'suppliers'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    code = db.Column(db.String(20), unique=True)
    phone = db.Column(db.String(20))
    email = db.Column(db.String(100))
    address = db.Column(db.String(200))
    tax_id = db.Column(db.String(50))
    contact_person = db.Column(db.String(100))
    payment_terms = db.Column(db.String(100))
    notes = db.Column(db.Text)
    
    # ุฑุจุท ุจุงูุตุงูุฉ
    showroom_id = db.Column(db.Integer, db.ForeignKey('showrooms.id'), nullable=False)
    
    # ุงูุญุงูุฉ
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, onupdate=datetime.utcnow)
    created_by = db.Column(db.String(100))
    
    # ุงูุนูุงูุงุช
    showroom = db.relationship('Showroom')
    invoices = db.relationship('SupplierInvoice', back_populates='supplier')
    payments = db.relationship('SupplierPayment', back_populates='supplier')
    debt = db.relationship('SupplierDebt', back_populates='supplier', uselist=False)
    
    # ุฎุตุงุฆุต ูุญุณูุจุฉ
    @property
    def total_debt(self):
        """ุฅุฌูุงูู ุงูุฏููู ุงููุชุจููุฉ"""
        return self.debt.remaining_debt if self.debt else 0
    
    @property
    def total_paid(self):
        """ุฅุฌูุงูู ุงููุฏููุนุงุช"""
        return self.debt.paid_amount if self.debt else 0
```

### **2. ุฌุฏูู "ุฏููู ุงูููุฑุฏูู" (SupplierDebt)**

```python
class SupplierDebt(db.Model):
    """ุฌุฏูู ุฏููู ุงูููุฑุฏูู - ุชุชุจุน ุฅุฌูุงูู ุงูุฏููู ูุงููุฏููุนุงุช"""
    __tablename__ = 'supplier_debts'
    
    id = db.Column(db.Integer, primary_key=True)
    supplier_id = db.Column(db.Integer, db.ForeignKey('suppliers.id'), nullable=False, unique=True)
    total_debt = db.Column(db.Float, default=0)  # ุฅุฌูุงูู ุงูุฏูู
    paid_amount = db.Column(db.Float, default=0)  # ุงููุจูุบ ุงููุฏููุน
    remaining_debt = db.Column(db.Float, default=0)  # ุงูุฏูู ุงููุชุจูู
    
    # ุชููุงุฆูุงู: remaining_debt = total_debt - paid_amount
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, onupdate=datetime.utcnow)
    
    # ุงูุนูุงูุงุช
    supplier = db.relationship('Supplier', back_populates='debt')
    payments = db.relationship('SupplierPayment', back_populates='debt')
```

### **3. ุฌุฏูู "ููุงุชูุฑ ุงูููุฑุฏูู" ุงูุฌุฏูุฏ (SupplierInvoice)**

```python
class SupplierInvoice(db.Model):
    """ูููุฐุฌ ูุงุชูุฑุฉ ุงูููุฑุฏ ุงูุฌุฏูุฏ - ูุน ุฏุนู ุงูุฏูุน ุงููุฑู"""
    __tablename__ = 'supplier_invoices'
    
    id = db.Column(db.Integer, primary_key=True)
    invoice_number = db.Column(db.String(50), unique=True, nullable=False)
    supplier_id = db.Column(db.Integer, db.ForeignKey('suppliers.id'), nullable=False)
    showroom_id = db.Column(db.Integer, db.ForeignKey('showrooms.id'), nullable=False)
    
    invoice_date = db.Column(db.Date, nullable=False, default=lambda: datetime.now(timezone.utc).date())
    due_date = db.Column(db.Date)  # ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
    
    # ุงููุจุงูุบ
    total_amount = db.Column(db.Float, nullable=False, default=0)  # ุฅุฌูุงูู ูุจู ุงูุฎุตู ูุงูุถุฑูุจุฉ
    discount_amount = db.Column(db.Float, default=0)  # ูููุฉ ุงูุฎุตู
    tax_amount = db.Column(db.Float, default=0)  # ูููุฉ ุงูุถุฑูุจุฉ
    final_amount = db.Column(db.Float, nullable=False, default=0)  # ุงููุจูุบ ุงูููุงุฆู
    
    # ุญุงูุฉ ุงูุฏูู
    debt_status = db.Column(db.String(20), default='unpaid')  # unpaid, partial, paid
    debt_amount = db.Column(db.Float, default=0)  # ูุจูุบ ุงูุฏูู
    paid_amount = db.Column(db.Float, default=0)  # ุงููุจูุบ ุงููุฏููุน
    
    notes = db.Column(db.Text)
    
    # ุงูุญุงูุฉ
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    created_by = db.Column(db.String(100))
    updated_at = db.Column(db.DateTime, onupdate=datetime.utcnow)
    
    # ุงูุนูุงูุงุช
    supplier = db.relationship('Supplier', back_populates='invoices')
    showroom = db.relationship('Showroom')
    payment_allocations = db.relationship('PaymentAllocation', back_populates='invoice')
    
    # ุฎุตุงุฆุต ูุญุณูุจุฉ
    @property
    def remaining_amount(self):
        """ุงููุจูุบ ุงููุชุจูู"""
        return self.debt_amount - self.paid_amount
    
    @property
    def is_fully_paid(self):
        """ูู ุงููุงุชูุฑุฉ ูุฏููุนุฉ ุจุงููุงููุ"""
        return self.paid_amount >= self.debt_amount
```

### **4. ุฌุฏูู "ุงููุฏููุนุงุช" ุงูุฌุฏูุฏ (SupplierPayment)**

```python
class SupplierPayment(db.Model):
    """ูููุฐุฌ ูุฏููุนุงุช ุงูููุฑุฏูู ุงูุฌุฏูุฏ - ูุน ุฏุนู ุงูุฏูุน ุงููุฑู"""
    __tablename__ = 'supplier_payments'
    
    id = db.Column(db.Integer, primary_key=True)
    supplier_id = db.Column(db.Integer, db.ForeignKey('suppliers.id'), nullable=False)
    debt_id = db.Column(db.Integer, db.ForeignKey('supplier_debts.id'), nullable=False)
    
    amount = db.Column(db.Float, nullable=False)  # ูุจูุบ ุงูุฏูุน
    payment_date = db.Column(db.DateTime, default=datetime.utcnow)
    payment_method = db.Column(db.String(50), default='ููุฏ')  # ููุฏุ ุดููุ ุชุญููู
    reference_number = db.Column(db.String(100))  # ุฑูู ุงููุฑุฌุน
    notes = db.Column(db.Text)
    
    # ููุน ุงูุฏูุน
    payment_type = db.Column(db.String(20), default='flexible')  # flexible, specific_invoice
    allocation_method = db.Column(db.String(20), default='auto_fifo')  # auto_fifo, auto_priority, manual
    
    # ูุนูููุงุช ุงูุฅุถุงูุฉ
    created_by = db.Column(db.String(100))
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    is_active = db.Column(db.Boolean, default=True)
    
    # ุงูุนูุงูุงุช
    supplier = db.relationship('Supplier', back_populates='payments')
    debt = db.relationship('SupplierDebt', back_populates='payments')
    allocations = db.relationship('PaymentAllocation', back_populates='payment')
    
    # ุฎุตุงุฆุต ูุญุณูุจุฉ
    @property
    def total_allocated(self):
        """ุฅุฌูุงูู ุงููุจูุบ ุงูููุฒุน ุนูู ุงูููุงุชูุฑ"""
        return sum(a.allocated_amount for a in self.allocations)
    
    @property
    def unallocated_amount(self):
        """ุงููุจูุบ ุบูุฑ ุงูููุฒุน"""
        return self.amount - self.total_allocated
```

### **5. ุฌุฏูู "ุชูุฒูุน ุงููุฏููุนุงุช" (PaymentAllocation)**

```python
class PaymentAllocation(db.Model):
    """ุฌุฏูู ุชูุฒูุน ุงููุฏููุนุงุช ุนูู ุงูููุงุชูุฑ - ูุธุงู ูุฑู"""
    __tablename__ = 'payment_allocations'
    
    id = db.Column(db.Integer, primary_key=True)
    payment_id = db.Column(db.Integer, db.ForeignKey('supplier_payments.id'), nullable=False)
    invoice_id = db.Column(db.Integer, db.ForeignKey('supplier_invoices.id'), nullable=False)
    allocated_amount = db.Column(db.Float, nullable=False)  # ุงููุจูุบ ุงููุฎุตุต ููุฐู ุงููุงุชูุฑุฉ
    
    # ูุนูููุงุช ุงูุชูุฒูุน
    allocation_date = db.Column(db.DateTime, default=datetime.utcnow)
    allocation_method = db.Column(db.String(20))  # auto_fifo, auto_priority, manual
    notes = db.Column(db.Text)
    
    # ุงูุนูุงูุงุช
    payment = db.relationship('SupplierPayment', back_populates='allocations')
    invoice = db.relationship('SupplierInvoice', back_populates='payment_allocations')
    
    # ุฎุตุงุฆุต ูุญุณูุจุฉ
    @property
    def allocation_percentage(self):
        """ูุณุจุฉ ุงูุชูุฒูุน ูู ุฅุฌูุงูู ุงูุฏูุน"""
        if self.payment and self.payment.amount > 0:
            return (self.allocated_amount / self.payment.amount) * 100
        return 0
```

---

## ๐ **ููุทู ุงูุนูู ุงูููุชุฑุญ**

### **ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ:**
1. ุฅูุดุงุก ุงููุงุชูุฑุฉ
2. ุชุญุฏูุซ `SupplierDebt.total_debt` (+ ูุจูุบ ุงููุงุชูุฑุฉ)
3. ุชุญุฏูุซ `SupplierDebt.remaining_debt`
4. ุชุณุฌูู ูู ุณุฌู ุงูุชุฏููู

### **ุนูุฏ ุฅุถุงูุฉ ุฏูุนุฉ:**
1. ุฅุถุงูุฉ `SupplierPayment`
2. **ุชูุฒูุน ุชููุงุฆู** ุนูู ุงูููุงุชูุฑ (FIFO ุฃู ุญุณุจ ุงูุฃููููุฉ)
3. ุชุญุฏูุซ ุญุงูุฉ ูู ูุงุชูุฑุฉ
4. ุชุญุฏูุซ `SupplierDebt.paid_amount`
5. ุชุณุฌูู ูู ุณุฌู ุงูุชุฏููู

---

## ๐จ **ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูููุชุฑุญุฉ**

### **ุตูุญุฉ "ุฏููู ุงูููุฑุฏูู":**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ููุฑุฏ: ุดุฑูุฉ ุงูุฎุดุจ ุงูููุชุงุฒ                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุฅุฌูุงูู ุงูุฏูู: 9,000 ุฏููุงุฑ              โ
โ ุงููุฏููุน: 3,000 ุฏููุงุฑ                    โ
โ ุงููุชุจูู: 6,000 ุฏููุงุฑ                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุฏูุน ูุจูุบ] [ุนุฑุถ ุงูุชูุงุตูู]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ูุงูุฐุฉ ุงูุฏูุน:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุฏูุน ููููุฑุฏ: ุดุฑูุฉ ุงูุฎุดุจ ุงูููุชุงุฒ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููุจูุบ: [6000] ุฏููุงุฑ                    โ
โ ุทุฑููุฉ ุงูุฏูุน: [ููุฏ โผ]                    โ
โ ุฑูู ุงููุฑุฌุน: [CHK-001]                  โ
โ ููุงุญุธุงุช: [ุฏูุน ูุงูู ููุฏููู]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุชูุฒูุน ุชููุงุฆู ุนูู ุงูููุงุชูุฑ:              โ
โ โข ูุงุชูุฑุฉ #001: 1,000 ุฏููุงุฑ              โ
โ โข ูุงุชูุฑุฉ #002: 2,000 ุฏููุงุฑ (ูุชุจูู)      โ
โ โข ูุงุชูุฑุฉ #003: 3,000 ุฏููุงุฑ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุฏูุน] [ุฅูุบุงุก]                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง **ุฎูุงุฑุฒููุฉ ุงูุชูุฒูุน ุงูุชููุงุฆู**

### **ุงูุทุฑููุฉ 1: FIFO (ุฃูู ูุงุฑุฏุ ุฃูู ูุฎุฑุฌ)**
```python
def allocate_payment_fifo(supplier_id, payment_amount):
    """ุชูุฒูุน ุงููุฏููุนุงุช ุญุณุจ FIFO"""
    # ุชุฑุชูุจ ุงูููุงุชูุฑ ุญุณุจ ุงูุชุงุฑูุฎ
    invoices = Invoice.query.filter_by(
        supplier_id=supplier_id,
        debt_status__in=['unpaid', 'partial']
    ).order_by(Invoice.created_at).all()
    
    remaining_payment = payment_amount
    allocations = []
    
    for invoice in invoices:
        if remaining_payment <= 0:
            break
            
        # ุญุณุงุจ ุงููุจูุบ ุงููุชุจูู ูููุงุชูุฑุฉ
        invoice_remaining = invoice.debt_amount - invoice.paid_amount
        
        # ุชุฎุตูุต ุงููุจูุบ (ุฃูู ูู ุงููุชุจูู ุฃู ุงููุฏููุน)
        allocated = min(remaining_payment, invoice_remaining)
        
        # ุชุญุฏูุซ ุงููุงุชูุฑุฉ
        invoice.paid_amount += allocated
        invoice.debt_status = 'paid' if invoice.paid_amount >= invoice.debt_amount else 'partial'
        
        # ุฅูุดุงุก ุณุฌู ุงูุชูุฒูุน
        allocation = PaymentAllocation(
            payment_id=payment.id,
            invoice_id=invoice.id,
            allocated_amount=allocated
        )
        allocations.append(allocation)
        
        remaining_payment -= allocated
    
    return allocations
```

### **ุงูุทุฑููุฉ 2: ุญุณุจ ุงูุฃููููุฉ (ุฃูุฏู ูุงุชูุฑุฉ ุฃููุงู)**
```python
def allocate_payment_priority(supplier_id, payment_amount):
    """ุชูุฒูุน ุงููุฏููุนุงุช ุญุณุจ ุงูุฃููููุฉ"""
    # ุชุฑุชูุจ ุญุณุจ ุงูุฃููููุฉ (ุชุงุฑูุฎ + ูุจูุบ)
    invoices = Invoice.query.filter_by(
        supplier_id=supplier_id,
        debt_status__in=['unpaid', 'partial']
    ).order_by(Invoice.created_at, Invoice.debt_amount).all()
    
    # ููุณ ุงูููุทู...
```

---

## ๐ **ุงูุชูุงุฑูุฑ ุงูููุชุฑุญุฉ**

### **1. ุชูุฑูุฑ ุฏููู ุงูููุฑุฏูู:**
- ุฅุฌูุงูู ุงูุฏููู ููู ููุฑุฏ
- ุงููุฏููุน ูุงููุชุจูู
- ุชุงุฑูุฎ ุขุฎุฑ ุฏูุนุฉ
- ูุณุจุฉ ุงูุฏูุน

### **2. ุชูุฑูุฑ ุชูุฒูุน ุงููุฏููุนุงุช:**
- ุชูุงุตูู ูู ุฏูุนุฉ
- ููููุฉ ุชูุฒูุนูุง ุนูู ุงูููุงุชูุฑ
- ุงููุชุจูู ููู ูุงุชูุฑุฉ

### **3. ุชูุฑูุฑ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ:**
- ุงูููุงุชูุฑ ุบูุฑ ุงููุฏููุนุฉ
- ุงููุฏุฉ ููุฐ ุงูุฅุตุฏุงุฑ
- ุฃููููุฉ ุงูุฏูุน

---

## ๐ฏ **ุงููุฒุงูุง ุงูููุชุฑุญุฉ**

### **ูููุณุชุฎุฏู:**
- โ **ุฏูุน ุณูู**: ูุง ุญุงุฌุฉ ูุฑุจุท ุงูุฏูุน ุจูุงุชูุฑุฉ ูุญุฏุฏุฉ
- โ **ุชูุฒูุน ุชููุงุฆู**: ุงููุธุงู ููุฒุน ุงููุฏููุนุงุช ุจุฐูุงุก
- โ **ูุถูุญ ูุงูู**: ุฑุคูุฉ ุดุงููุฉ ููุฏููู ูุงููุฏููุนุงุช
- โ **ูุฑููุฉ**: ุฏุนู ุงูุณููุงุฑูููุงุช ุงููุฎุชููุฉ

### **ูููุธุงู:**
- โ **ุฏูุฉ**: ุชุชุจุน ุฏููู ููู ูุฑุด
- โ **ุณูููุฉ**: ูุงุฌูุฉ ุจุณูุทุฉ ููููููุฉ
- โ **ุฃูุงู**: ุชุณุฌูู ูุงูู ููุนูููุงุช
- โ **ูุงุจููุฉ ุงูุชูุณุน**: ุฏุนู ุงูููุฑุฏูู ุงููุชุนุฏุฏูู

---

## ๐ **ูุซุงู ุนููู**

### **ุงูุณููุงุฑูู:**
1. ูุงุชูุฑุฉ #001: 1000 ุฏููุงุฑ (ุบูุฑ ูุฏููุนุฉ)
2. ูุงุชูุฑุฉ #002: 5000 ุฏููุงุฑ (ูุฏููุนุฉ ุฌุฒุฆูุงู: 3000)
3. ูุงุชูุฑุฉ #003: 6000 ุฏููุงุฑ (ุบูุฑ ูุฏููุนุฉ)
4. **ุฏูุน 4000 ุฏููุงุฑ**

### **ุงูุชูุฒูุน ุงูุชููุงุฆู:**
1. ูุงุชูุฑุฉ #001: 1000 ุฏููุงุฑ (ุชุตุจุญ ูุฏููุนุฉ ุจุงููุงูู)
2. ูุงุชูุฑุฉ #002: 2000 ุฏููุงุฑ (ุชุตุจุญ ูุฏููุนุฉ ุจุงููุงูู)
3. ูุงุชูุฑุฉ #003: 1000 ุฏููุงุฑ (ุชุตุจุญ ูุฏููุนุฉ ุฌุฒุฆูุงู)

### **ุงููุชูุฌุฉ:**
- ุฅุฌูุงูู ุงูุฏูู: 9000 โ 5000 ุฏููุงุฑ
- ุงููุฏููุน: 3000 โ 7000 ุฏููุงุฑ
- ุงููุชุจูู: 6000 โ 2000 ุฏููุงุฑ

---

## ๐ **ุฎุทุฉ ุฅุนุงุฏุฉ ุงูุจูุงุก ุงููุงููุฉ**

### **ุงููุฑุญูุฉ 1: ุญุฐู ุงููุธุงู ุงููุฏูู (ููู ูุงุญุฏ)**
1. **ุญุฐู ุงูุฌุฏุงูู ุงููุฏููุฉ:**
   - `DROP TABLE supplier_payments`
   - `DROP TABLE purchase_invoice_items`
   - `DROP TABLE purchase_invoices`
   - `DROP TABLE suppliers`

2. **ุญุฐู ุงูููุงุฐุฌ ูู app.py:**
   - ุญุฐู `class Supplier`
   - ุญุฐู `class PurchaseInvoice`
   - ุญุฐู `class PurchaseInvoiceItem`
   - ุญุฐู `class SupplierPayment`

3. **ุญุฐู routes ุงูููุฑุฏูู:**
   - ุญุฐู ุฌููุน routes ุงูููุฑุฏูู ูุงูููุงุชูุฑ
   - ุญุฐู routes ุงููุฏููุนุงุช

4. **ุญุฐู templates ุงูููุฑุฏูู:**
   - ุญุฐู ุฌููุน templates ุงูููุฑุฏูู
   - ุญุฐู templates ุงูููุงุชูุฑ ูุงููุฏููุนุงุช

5. **ุชูุธูู ุงูููุฏ:**
   - ุญุฐู imports ุบูุฑ ุงููุณุชุฎุฏูุฉ
   - ุชูุธูู ุงูุนูุงูุงุช

### **ุงููุฑุญูุฉ 2: ุชุทููุฑ ุงููุธุงู ุงูุฌุฏูุฏ (ุฃุณุจูุน)**
1. **ุฅูุดุงุก ุงูููุงุฐุฌ ุงูุฌุฏูุฏุฉ:**
   - `class Supplier` (ุฌุฏูุฏ)
   - `class SupplierDebt` (ุฌุฏูุฏ)
   - `class SupplierInvoice` (ุฌุฏูุฏ)
   - `class SupplierPayment` (ุฌุฏูุฏ)
   - `class PaymentAllocation` (ุฌุฏูุฏ)

2. **ุชุทููุฑ ุงูููุทู ุงูุฃุณุงุณู:**
   - ุฏูุงู ุฅุถุงูุฉ ุงูููุฑุฏูู
   - ุฏูุงู ุฅุถุงูุฉ ุงูููุงุชูุฑ
   - ุฏูุงู ุฅุถุงูุฉ ุงููุฏููุนุงุช
   - ุฎูุงุฑุฒููุฉ ุงูุชูุฒูุน ุงูุชููุงุฆู
   - ุฏูุงู ุงูุชุญุฏูุซ

3. **ุฅุถุงูุฉ ุงูุนูุงูุงุช:**
   - ุฑุจุท ุงูููุฑุฏูู ุจุงูุตุงูุงุช
   - ุฑุจุท ุงูููุงุชูุฑ ุจุงูููุฑุฏูู
   - ุฑุจุท ุงููุฏููุนุงุช ุจุงูุฏููู
   - ุฑุจุท ุงูุชูุฒูุนุงุช ุจุงูููุงุชูุฑ

### **ุงููุฑุญูุฉ 3: ุชุทููุฑ ุงููุงุฌูุงุช (ุฃุณุจูุน)**
1. **ุตูุญุงุช ุฅุฏุงุฑุฉ ุงูููุฑุฏูู:**
   - ูุงุฆูุฉ ุงูููุฑุฏูู
   - ุฅุถุงูุฉ ููุฑุฏ ุฌุฏูุฏ
   - ุชุนุฏูู ุงูููุฑุฏ
   - ุชูุงุตูู ุงูููุฑุฏ

2. **ุตูุญุงุช ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ:**
   - ูุงุฆูุฉ ุงูููุงุชูุฑ
   - ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
   - ุชุนุฏูู ุงููุงุชูุฑุฉ
   - ุชูุงุตูู ุงููุงุชูุฑุฉ

3. **ุตูุญุงุช ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช:**
   - ูุงุฆูุฉ ุงููุฏููุนุงุช
   - ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ
   - ุชูุฒูุน ุงููุฏููุนุงุช
   - ุชูุงุตูู ุงูุฏูุน

4. **ุตูุญุงุช ุฅุฏุงุฑุฉ ุงูุฏููู:**
   - ุฏููู ุงูููุฑุฏูู
   - ุชูุงุตูู ุงูุฏูู
   - ุชูุฒูุน ุงููุฏููุนุงุช

### **ุงููุฑุญูุฉ 4: ุฅุถุงูุฉ ุงูุชูุงุฑูุฑ (ุฃุณุจูุน)**
1. **ุชูุงุฑูุฑ ุงูุฏููู:**
   - ุชูุฑูุฑ ุฏููู ุงูููุฑุฏูู
   - ุชูุฑูุฑ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
   - ุชูุฑูุฑ ุงููุฏููุนุงุช

2. **ุชูุงุฑูุฑ ุงูุชูุฒูุน:**
   - ุชูุฑูุฑ ุชูุฒูุน ุงููุฏููุนุงุช
   - ุชูุฑูุฑ ุงูููุงุชูุฑ ุงููุฏููุนุฉ
   - ุชูุฑูุฑ ุงููุชุจูู

3. **ุชูุงุฑูุฑ ุงูุฃุฏุงุก:**
   - ุชูุฑูุฑ ุฃุฏุงุก ุงูููุฑุฏูู
   - ุชูุฑูุฑ ุณุฑุนุฉ ุงูุฏูุน
   - ุชูุฑูุฑ ุงูุฏููู ุงููุชุฑุงููุฉ

### **ุงููุฑุญูุฉ 5: ุงูุงุฎุชุจุงุฑ ูุงูุชุญุณูู (ุฃุณุจูุน)**
1. **ุงุฎุชุจุงุฑ ุงูุณููุงุฑูููุงุช:**
   - ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุงูููุฑุฏูู
   - ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุงูููุงุชูุฑ
   - ุงุฎุชุจุงุฑ ุงููุฏููุนุงุช ุงููุฑูุฉ
   - ุงุฎุชุจุงุฑ ุงูุชูุฒูุน ุงูุชููุงุฆู

2. **ุชุญุณูู ุงูุฃุฏุงุก:**
   - ุชุญุณูู ุงูุงุณุชุนูุงูุงุช
   - ุฅุถุงูุฉ ุงูููุฑุณุฉ
   - ุชุญุณูู ุงูุฐุงูุฑุฉ

3. **ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุฃุฎุทุงุก:**
   - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
   - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
   - ุฑุณุงุฆู ุงูุฎุทุฃ

4. **ุงูุชูุซูู:**
   - ุชูุซูู ุงูููุฏ
   - ุฏููู ุงููุณุชุฎุฏู
   - ุฏููู ุงููุทูุฑ

---

## ๐ **ูููุงุช ุงูุชุทููุฑ ุงููุทููุจุฉ**

### **1. ูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- `migrate_supplier_system_rebuild.py` - migration script ูุฅุนุงุฏุฉ ุงูุจูุงุก
- `models/supplier_models.py` - ุฌููุน ุงูููุงุฐุฌ ุงูุฌุฏูุฏุฉ
- `utils/database_cleanup.py` - ุณูุฑูุจุช ุชูุธูู ุงููุธุงู ุงููุฏูู

### **2. ูููุงุช ุงูุชุทุจูู:**
- `routes/suppliers.py` - routes ุฅุฏุงุฑุฉ ุงูููุฑุฏูู
- `routes/supplier_invoices.py` - routes ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ
- `routes/supplier_payments.py` - routes ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช
- `routes/supplier_debts.py` - routes ุฅุฏุงุฑุฉ ุงูุฏููู
- `utils/payment_allocator.py` - ุฎูุงุฑุฒููุฉ ุงูุชูุฒูุน ุงูุชููุงุฆู

### **3. ูููุงุช ุงููุงุฌูุงุช:**
- `templates/suppliers/` - ูุฌูุฏ ุตูุญุงุช ุงูููุฑุฏูู
  - `suppliers.html` - ูุงุฆูุฉ ุงูููุฑุฏูู
  - `new_supplier.html` - ุฅุถุงูุฉ ููุฑุฏ ุฌุฏูุฏ
  - `edit_supplier.html` - ุชุนุฏูู ุงูููุฑุฏ
  - `supplier_detail.html` - ุชูุงุตูู ุงูููุฑุฏ
- `templates/supplier_invoices/` - ูุฌูุฏ ุตูุญุงุช ุงูููุงุชูุฑ
  - `invoices.html` - ูุงุฆูุฉ ุงูููุงุชูุฑ
  - `new_invoice.html` - ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
  - `edit_invoice.html` - ุชุนุฏูู ุงููุงุชูุฑุฉ
  - `invoice_detail.html` - ุชูุงุตูู ุงููุงุชูุฑุฉ
- `templates/supplier_payments/` - ูุฌูุฏ ุตูุญุงุช ุงููุฏููุนุงุช
  - `payments.html` - ูุงุฆูุฉ ุงููุฏููุนุงุช
  - `new_payment.html` - ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ
  - `payment_detail.html` - ุชูุงุตูู ุงูุฏูุน
  - `payment_allocation.html` - ุชูุฒูุน ุงููุฏููุนุงุช
- `templates/supplier_debts/` - ูุฌูุฏ ุตูุญุงุช ุงูุฏููู
  - `debts.html` - ุฏููู ุงูููุฑุฏูู
  - `debt_detail.html` - ุชูุงุตูู ุงูุฏูู

### **4. ูููุงุช ุงูุชูุงุฑูุฑ:**
- `templates/reports/supplier_debts_report.html` - ุชูุฑูุฑ ุงูุฏููู
- `templates/reports/payment_allocations_report.html` - ุชูุฑูุฑ ุงูุชูุฒูุน
- `templates/reports/supplier_performance_report.html` - ุชูุฑูุฑ ุฃุฏุงุก ุงูููุฑุฏูู
- `templates/reports/overdue_invoices_report.html` - ุชูุฑูุฑ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ

### **5. ูููุงุช JavaScript:**
- `static/js/supplier_payments.js` - JavaScript ูููุฏููุนุงุช ุงููุฑูุฉ
- `static/js/payment_allocation.js` - JavaScript ูุชูุฒูุน ุงููุฏููุนุงุช
- `static/js/supplier_debts.js` - JavaScript ูุฅุฏุงุฑุฉ ุงูุฏููู

### **6. ูููุงุช CSS:**
- `static/css/supplier_system.css` - ุชูุณููุงุช ุงููุธุงู ุงูุฌุฏูุฏ
- `static/css/payment_forms.css` - ุชูุณููุงุช ููุงุฐุฌ ุงููุฏููุนุงุช

---

## โ๏ธ **ุงุนุชุจุงุฑุงุช ูููุฉ**

### **ุงูุฃูุงู:**
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช
- ูุณุฎ ุงุญุชูุงุทูุฉ ููุชุธูุฉ

### **ุงูุฃุฏุงุก:**
- ููุฑุณุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุญุณูู ุงูุงุณุชุนูุงูุงุช
- ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุจูุฑุฉ

### **ุงููุฑููุฉ:**
- ุฏุนู ุงูุนููุงุช ุงููุชุนุฏุฏุฉ
- ุฅููุงููุฉ ุชุฎุตูุต ุฎูุงุฑุฒููุฉ ุงูุชูุฒูุน
- ุฏุนู ุงููุฏููุนุงุช ุงูุฌุฒุฆูุฉ

---

## ๐ฏ **ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ**

### **๐ ุฅุนุงุฏุฉ ุงูุจูุงุก ุงููุงููุฉ - ุงููุฑุตุฉ ุงูุฐูุจูุฉ**

**ุงููุถุน ุงููุซุงูู:**
- โ **ูุง ุชูุฌุฏ ุจูุงูุงุช ุฅูุชุงุฌ** - ูุฎุงุทุฑ ููุฎูุถุฉ ุฌุฏุงู
- โ **ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุชููุฑุฉ** - ุฃูุงู ุฅุถุงูู
- โ **ูุฑุญูุฉ ุงูุชุทููุฑ** - ูุฑููุฉ ูุงููุฉ
- โ **ูุง ููุฌุฏ ูุณุชุฎุฏููู ููุงุฆููู** - ูุง ุชููู ููุฎุฏูุฉ

### **๐ฏ ุงููุธุงู ุงูุฌุฏูุฏ ูููุฑ:**
- **ุฏูุน ูุฑู ูุงูู** - ูุง ุญุงุฌุฉ ูุฑุจุท ุจูุงุชูุฑุฉ ูุญุฏุฏุฉ
- **ุชูุฒูุน ุฐูู ุชููุงุฆู** - ุฎูุงุฑุฒููุงุช ูุชูุฏูุฉ
- **ูุถูุญ ูุงูู** - ุฑุคูุฉ ุดุงููุฉ ููุฏููู ูุงููุฏููุนุงุช
- **ุณูููุฉ ุงูุงุณุชุฎุฏุงู** - ูุงุฌูุฉ ุจุณูุทุฉ ููููููุฉ
- **ุฏูุฉ ูู ุงูุชุชุจุน** - ุชุณุฌูู ูุงูู ููุนูููุงุช
- **ูุธุงู ูุธูู 100%** - ุจุฏูู ุชุนููุฏุงุช ุงููุธุงู ุงููุฏูู
- **ูุฑููุฉ ูุงููุฉ** - ุฏุนู ุฌููุน ุงูุณููุงุฑูููุงุช ุงููุทููุจุฉ
- **ุฃุฏุงุก ูุญุณู** - ุงุณุชุนูุงูุงุช ูุญุณูุฉ ูู ุงูุจุฏุงูุฉ

### **โฑ๏ธ ุงูุฌุฏูู ุงูุฒููู:**
- **ุงููุฑุญูุฉ 1**: ุญุฐู ุงููุธุงู ุงููุฏูู (ููู ูุงุญุฏ)
- **ุงููุฑุญูุฉ 2**: ุชุทููุฑ ุงููุธุงู ุงูุฌุฏูุฏ (ุฃุณุจูุน)
- **ุงููุฑุญูุฉ 3**: ุชุทููุฑ ุงููุงุฌูุงุช (ุฃุณุจูุน)
- **ุงููุฑุญูุฉ 4**: ุฅุถุงูุฉ ุงูุชูุงุฑูุฑ (ุฃุณุจูุน)
- **ุงููุฑุญูุฉ 5**: ุงูุงุฎุชุจุงุฑ ูุงูุชุญุณูู (ุฃุณุจูุน)

**ุฅุฌูุงูู ุงูููุช ุงููุทููุจ: 4 ุฃุณุงุจูุน**

### **๐ฏ ุงูุชูุตูุฉ ุงูููุงุฆูุฉ:**
**ุฅุนุงุฏุฉ ุจูุงุก ูุธุงู ุงูููุฑุฏูู ุจุงููุงูู ูู ุงูุฎูุงุฑ ุงูุฃูุซู** ูู ุงููุถุน ุงูุญุงููุ ุญูุซ ูููุฑ:
- **ูุธุงู ูุธูู ููุชุณู** ุจุฏูู ุชุนููุฏุงุช
- **ูุฑููุฉ ูุงููุฉ** ูู ุงูุชุตููู ูุงูุชุทููุฑ
- **ุฃุฏุงุก ูุญุณู** ุนูู ุงููุฏู ุงูุทููู
- **ุณูููุฉ ุงูุตูุงูุฉ** ูุงูุชุทููุฑ
- **ุชูููุฉ ุฅุฌูุงููุฉ ุฃูู** ูู ุงูุชุทููุฑ ุงูุชุฏุฑูุฌู

**ูุฐู ูุฑุตุฉ ุฐูุจูุฉ ูุฅุนุงุฏุฉ ุงูุจูุงุก ุจุงูุทุฑููุฉ ุงูุตุญูุญุฉ!** ๐
